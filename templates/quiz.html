{% extends "base.html" %}
{% block title %}Take Quiz - TESTDO{% endblock %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-10">
        <div class="card shadow-sm border-0 mb-4">
            <div class="card-body text-center">
                <h3 class="fw-bold mb-3">üìù Take Quiz</h3>
                <div id="timer" class="alert alert-warning fw-semibold fs-5"></div>
            </div>
        </div>

        <form id="quizForm" method="POST">
            {% for q in quiz %}
            <div class="card mb-3 shadow-sm border-0">
                <div class="card-body">
                    <h5 class="card-title fw-bold">{{ loop.index }}. {{ q.question }}</h5>

                    {% set q_index = loop.index0 %}
                    {% for option in q.options %}
                    <div class="form-check">
                        <input class="form-check-input"
                               type="radio"
                               name="q{{ q_index }}"
                               value="{{ option }}"
                               required
                               id="q{{ q_index }}_{{ loop.index }}">
                        <label class="form-check-label" for="q{{ q_index }}_{{ loop.index }}">
                            {{ option }}
                        </label>
                    </div>
                    {% endfor %}
                </div>
            </div>
            {% endfor %}

            <div class="text-center">
                <button type="submit" class="btn btn-success px-4 py-2 fw-semibold">‚úÖ Submit Quiz</button>
            </div>
        </form>
    </div>
</div>

<!-- ‚úÖ Timer Script -->
<script>
    let timer = 60;  // Change this to increase/decrease time
    let interval = setInterval(() => {
        const timerBox = document.getElementById("timer");
        if (timer <= 0) {
            clearInterval(interval);
            timerBox.innerText = "‚è±Ô∏è Time's up! Submitting...";
            document.getElementById("quizForm").submit();
        } else {
            timerBox.innerText = "‚è≥ " + timer + " seconds remaining";
            timer--;
        }
    }, 1000);
</script>
{% endblock %}
